# Better Way 4. C스타일 형식 문자열을 str.format과 쓰기보다는 f-문자열을 통한 인터폴레이션을 사용하라.

형식화(formatting)은 미리 정의된 문자열에 데이터 값을 끼워 넣어 사람이 보기 좋은 문자열로 저장하는 과정이다.

## % 연산자를 사용하는 C 스타일 형식화 문자열

* % 형식화 연산자를 사용
* 미리 정의된 텍스트 템플릿을 형식 문자열이라고 부른다.
* C의 `printf` 로부터 문법이 비롯됨. - `%d`, `%s` 등 대부분의 형식 지원자 지원
```python
a = 0b101101
b = 0xc4f

print('이진수 : %d, 16진수 : %d' % (a, b))
>> 이진수 : 45, 16진수 : 3151
```
* 익숙하고 사용하기 편하지만 4가지 문제점이 존재함
	1. 오른쪽에 있는 `tuple`내 데이터 값의 순서를 바꾸거나 타입을 바꾸면 오류가 발생함 -> `%` 연산자의 좌우가 서로 잘 맞는지 계속 검사해야 함.
	2. 형식화를 하기 전에 값을 변경한다면 식을 읽기가 어려워짐 -> 가독성 문제
	3. 같은 값을 여러 번 사용하고 싶다면 튜플에서 같은 값을 여러 번 반복해야 함
	4. 형식화 식에 딕셔너리를 사용하면서 불필요한 중복이 증가함.
	```python
	name = "철수"
	template = '%(name)s는 인사한다. %(name)s야 안녕'
	print(template % {"name": name})
	# 철수는 인사한다. 철수야 안녕
	```
	1번과 3번 문제를 해결했지만 식이 더 길어지고 불필요한 중복이 생김
## str.format 메서드
* C 스타일 형식화 문자열보다 더 표현력이 좋은 고급 문자열 형식화
* format 내장함수 사용
* 위치 지정자 {}를 사용할 수 있다. -> format 메서드에 전달된 인자중 순서상 같은 위치에 있는 인자.
```python
key = 'my_var'
value = 1.234

formatted = '{} = {}'.format(key, value)
print(formatted)

>>>
my_var = 1.234
```
* 콜론 뒤에 형식 지정자를 붙여서 변환도 가능함.
* 중괄호를 사용하고 싶으면 중괄호를 이스케이프 해야함.
* 메서드에 전달된 인자의 순서를 표현하는 위치 인덱스를 전달할 수 있음. -> 순서를 안바꾸고 출력 순서를 변경
```python
name = "Alice" 
age = 25 
formatted = "My name is {0} and I am {1} years old.".format(name, age)
```
* 형식화를 하기 전 값을 변경하는 경우 코드 가독성 감소
* 키가 반복되는 경우 중복을 줄이지 못하는 문제
# f-string (인터폴레이션을 활용한 형식 문자열)
* 형식 지정자와 format 내장함수를 사용함으로써 발생하는 문제를 해결함
* 형식 문자열 앞에 f 문자를 붙인다.
* 키와 값을 불필요하게 중복 지정해야 하는 경우를 없애줌 -> 간결함
* format 함수에서 사용했던 내장 미니 언어를 사용가능함 + 유니코드나 repr 문자열로 변환하는 것도 가능
```python
formatted = f'{key!r:<10} = {value:.2f}'
print(formatted)

# 'my_var' = 1.23
```
* f-문자열을 사용하면 위치 지정자 중괄호 안에 완전한 파이썬 식을 넣을 수도 있다.
* 파이썬 프로그래머가 사용할 수 있는 형식화 옵션 중에서 f-문자열이 최고다.

### str.format과 f-문자열은 무슨 차이가 있을까?

`str.format`:
1. **버전 호환성**: Python 2.6 이상과 Python 3에서 사용할 수 있다.
2. **사용법**: 중괄호 `{}`를 사용해 문자열 내에서 변수의 위치를 지정하고, `format` 메서드를 통해 해당 위치에 들어갈 값들을 전달한다.
3. **유연성**: `str.format`은 복잡한 문자열 포맷팅에 유용하며, 동적인 문자열 생성 시 유용하다.

f-string (f-문자열):
1. **버전 제한**: Python 3.6 이상에서만 사용할 수 있다.
2. **사용법**: 문자열 앞에 `f`나 `F`를 붙이고, 중괄호 `{}` 안에 직접 변수 이름이나 표현식을 넣어서 사용한다.
3. **성능**: f-string은 `str.format`에 비해 더 빠른 실행 속도를 제공한다.
4. **가독성**: 코드의 간결성과 가독성이 높다. 변수를 직접 문자열 안에 넣을 수 있어 편리하다.

### f-문자열에서 키와 값을 중복으로 지정하는 경우에 대해 어떤 예시가 있을까?

1. **동일한 변수의 반복 사용**: f-string 내에서 같은 변수를 여러 번 사용할 수 있다. 이는 특정 데이터를 문자열 내의 여러 위치에 반복해서 표시해야 할 때 유용하다.
2. **표현식의 사용**: f-string 내부에 파이썬 표현식을 직접 삽입할 수 있다. 이 표현식은 문자열이 실행될 때 평가되고 그 결과가 문자열에 삽입된다. 표현식은 변수, 연산자, 함수 호출 등을 포함할 수 있다.
```python
name = "Alice"
age = 30

# 동일한 변수를 여러 번 사용
formatted = f"Name: {name}, Age in 5 years: {age + 5}, Age in 10 years: {age + 10}"
print(formatted)
```
위 예시에서 `name` 변수는 한 번만 사용되지만, `age` 변수는 여러 차례 사용되며, 각각 다른 연산(5년 후의 나이, 10년 후의 나이)에 사용된다.

### 완전한 파이썬 식을 넣는 것을 좀 더 구체적으로 알아보자.

f-string 내에는 파이썬의 완전한 표현식을 포함할 수 있다. 예를 들어, 리스트의 요소에 접근하거나 함수를 호출하는 것과 같은 복잡한 연산을 수행할 수 있다.

```python
def get_message(name):
    return f"Hello, {name}!"

names = ["Alice", "Bob", "Charlie"]
messages = [get_message(name) for name in names]

# 리스트의 특정 요소에 접근
formatted = f"The first person is {names[0]}, and their message is: {messages[0]}"
print(formatted)
```
이처럼 f-string 내에서는 리스트 인덱싱, 함수 호출, 반복문 등 다양한 파이썬 표현식을 사용할 수 있다.